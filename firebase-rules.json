{
  "rules": {
    ".read": false,
    ".write": false,

    "items": {
      ".read": true,
      ".validate": "newData.hasChildren()",
      "$itemId": {
        ".write": "auth !== null && (newData.child('userId').val() === auth.uid || data.child('userId').val() === auth.uid)",
        ".validate": "newData.child('userId').val() === auth.uid && newData.hasChildren(['userId'])"
      },
      ".indexOn": ["isFeatured", "pageId", "timing"]
    },

    "lastTiming": {
      ".read": true,
      ".write": "auth !== null",
      ".validate": "newData.isNumber() && newData.val() > 0"
    },

    "uploads": {
      ".read": "auth !== null",
      ".validate": "newData.hasChildren()",
      "$uploadId": {
        ".read": "auth !== null && data.child('userId').val() === auth.uid",
        ".write": "auth !== null && (newData.child('userId').val() === auth.uid || data.child('userId').val() === auth.uid)",
        ".validate": "newData.child('userId').val() === auth.uid && newData.hasChildren(['userId'])"
      },
      ".indexOn": "userId"
    },

    "users": {
      ".read": true,
      ".validate": "newData.hasChildren()",
      "$userId": {
        ".write": "auth !== null && $userId === auth.uid",
        ".validate": "newData.hasChildren()"
      },
      ".indexOn": "username"
    },

    "$other": {
      ".validate": "false"
    }
  }
}
